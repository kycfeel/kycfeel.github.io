---
layout: post
title:  "나도 Kubernetes 써보고 싶어요!"
date:   2018-08-02 14:47:45 +0900
categories: Kubernetes
---

안녕 독자들. 주인장은 아직 살아있어요. 마지막 글을 1월에 남기고 쭉 잠수를 탔는데, 그 사이 정말 많은 일이 있었거든요. 처음으로 한 회사에 들어가 많은 경험을 했지만, 그리 행복하지 않았어요. 이전에는 생각하지도 않았던 여러 요소들에게 스트레스도 많이 받았죠. 결국 3개월만에 그 곳을 나오고 다른 곳을 물색했던 저는 우연히 [bitHolla](https://bitholla.com)라는 암호화폐 관련 기술을 다루는 스타트업에 DevOps 엔지니어로 참여하게 되었어요.

> 비트홀라는 여러 암호화폐 거래소에 동시에 연결해 빠른 거래를 할 수 있게 해주는 트레이딩 터미널 - [XRayTrade](https://xray.trade)와, 직접 암호화폐 거래소를 개설할 수 있게 도와주는 거래소 플랫폼 - [HollaEx](https://hollaex.com)를 서비스하고 있는 스타트업이에요. 외국인들로 구성된 기업이라 영어로 일할 수 있다는 점, 쓸데없는 규율이 존재하지 않아 마음 편하게 하고싶은 일을 할 수 있다는 점이 너무 마음에 들어 만족하며 일하고 있어요.

제가 비트홀라에서 담당하고 있는 일 중, 가장 중요하고 궁극적으로 이룰려고 하는 일이 모든 인프라의 쿠버네티스 마이그레이션 이에요. 기존 인프라는 도커화(dockerize)는 되어 있지만, 모던 아키텍처가 요구하는 컨테이너 오케스트레이션은 이루어지지 않고 있는 상태입니다. 지금의 서비스에는 큰 문제가 없지만, 추후 규모가 커졌을 때의 자유로운 스케일 업 / 다운, 장애 복구, 그리고 빠르고 간편한 코드 배포를 위해 쿠버네티스를 대체 솔루션으로 선택했죠.

##잠깐만요. 그래서, 쿠버네티스가 뭔데요?

<div align="center"><img src="https://github.com/kycfeel/kycfeel.github.io/blob/master/_images/k8s-logo.png?raw=true"/></div><br/>

쿠버네티스 (또는 줄여서 k8s)는 한 줄로 정리하자면 *도커 컨테이너 기반 서비스 그 자체를 쉽게 이룰 수 있게 도와주는 궁극적인 플랫폼* 이에요.

쿠버네티스와 도커는 별개가 아니에요. 쿠버네티스가 도커 데몬과 연결되어 기존에 수동으로 하나하나 설정하던 모든 작업을 쿠버네티스 단에서 처리할 수 있게 해주죠. 일종의 도커라는 컴퓨터를 굴리는 운영체제라고 생각하셔도 좋아요.

쿠버네티스를 사용하면 여러 도커 호스트(서버)를 하나의 클러스터로 쉽게 묶어 서비스를 배포할 수 있어요. 어떤 호스트에 얼만큼 컨테이너를 분배할 지 등도 쿠버네티스가 자동으로 결정해 줍니다. 기존 도커 호스트를 따로따로 운영하는 것보다 더 효율적인 자원 분배가 가능하다는 말이에요. 물론 어떤 호스트에 어떤 컨테이너가 있는지 따로따로 기억할 필요도 전혀 없어지게 되죠. 자체적인 이미지(코드) 배포 기능을 가지고 있어 기존 서비스의 중단 없이 신 버전 코드로 업데이트도 가능하고, 추가적인 외부 저장소(AWS EBS 등)를 쿠버네티스 클러스터 자체와 마운트해 데이터베이스 같은 Stateful한 애플리케이션도 문제없이 운영할 수 있어요. 뿐만 아니라, 내 서비스가 유지해야 할 필수 동작(설정) 선언에 따라 클러스터가 스스로 똑같은 상태를 유지합니다. 도커 호스트 일부가 다운되는 등 문제가 발생하더라도, 현재 사용할 수 있는 자원을 파악해 새로운 호스트로 즉시 똑같은 구성의 컨테이너를 생성하죠.

휴, 이제 숨 쉬셔도 됩니다. 어때요. 여기까지만 들어도 사용해보고 싶은 마음에 뿜뿜 들지 않나요?

조금만 참으세요. 앞으로 일종의 시리즈 물처럼 쿠버네티스 클러스터의 구축부터, 현재 도커화해서 사용하던 애플리케이션의 쿠버네티스 레시피화(yml 파일), Helm 패키지 매니저를 통한 더 쉬운 애플리케이션 배포, Jenkins 등의 CI 도구를 사용하는 애플리케이션 배포 자동화까지 모두 다룰 예정입니다. 이 글만 살펴봐도 즉시 쿠버네티스를 사용할 수 있게요!

다음 글이 업로드되면 이 글 아래에 링크를 달아 둘꺼에요. 그동안 아래의 문서들을 읽고 계셔도 좋아요.

## 참고 문서

- [레드헷 - Kubernetes란?](https://www.redhat.com/ko/topics/containers/what-is-kubernetes)

- [레드헷 - Docker란?](https://www.redhat.com/ko/topics/containers/what-is-docker)

- [레드헷 - Linux 컨테이너에 대해 알아보세요](https://www.redhat.com/ko/topics/containers)
